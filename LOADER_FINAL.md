# Loading æ•¸å­—å‹•ç•« - æœ€çµ‚ç‰ˆæœ¬

**æ—¥æœŸ**: 2025-10-01  
**é¢¨æ ¼**: è¶…å¤§ç²—é«”æ•¸å­—,å¤šéšæ®µè·³å‹•

---

## âœ… å·²ä¿®æ­£çš„å•é¡Œ

### 1. **Hydration Error ä¿®æ­£**
```tsx
const [mounted, setMounted] = useState(false);

useEffect(() => {
  setMounted(true);
}, []);

if (!mounted) {
  return null; // SSR æ™‚ä¸æ¸²æŸ“
}
```
- è§£æ±º SSR/Client ä¸ä¸€è‡´å•é¡Œ
- åªåœ¨ client ç«¯æ¸²æŸ“ Loader

### 2. **æ•¸å­—æ›´å¤§**
```tsx
// Before: clamp(120px, 20vw, 280px)
// After:  clamp(180px, 28vw, 420px)

å­—é«”å¤§å°æå‡ 50%:
- æœ€å°: 120px â†’ 180px
- ç†æƒ³: 20vw â†’ 28vw  
- æœ€å¤§: 280px â†’ 420px
```

### 3. **å­—é«”æ›´ç²—æ›´æ¥è¿‘åœ–ç‰‡**
```tsx
// Before:
fontWeight: 700
fontFamily: 'var(--font-geist-sans)'

// After:
fontWeight: 900 // æœ€ç²—
fontFamily: 'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'
letterSpacing: '-0.04em' // æ›´ç·Šå¯†
```

### 4. **ä¸­é–“é¡¯ç¤ºæ›´å¤šæ•¸å­—**
```tsx
// å¤šéšæ®µé€²åº¦é€Ÿåº¦
if (currentProgress < 30) {
  currentProgress += 1.5; // æ…¢é€Ÿèµ·æ­¥ (0-30)
} else if (currentProgress < 60) {
  currentProgress += 0.8; // ä¸­é€Ÿ (30-60)
} else if (currentProgress < 90) {
  currentProgress += 1.2; // åŠ é€Ÿ (60-90)
} else {
  currentProgress += 0.5; // æ¸›é€Ÿåˆ° 100
}
```

**æ•¸å­—é¡¯ç¤ºåºåˆ—ç¯„ä¾‹**:
```
0 â†’ 2 â†’ 4 â†’ 6 â†’ 9 â†’ 11 â†’ 13 â†’ 15 â†’ 18 â†’ 20 â†’ 22 â†’ 25 â†’ 27 â†’ 29 â†’ 
30 â†’ 31 â†’ 32 â†’ 33 â†’ 34 â†’ 36 â†’ 37 â†’ 38 â†’ 40 â†’ 41 â†’ 42 â†’ 44 â†’ 45 â†’ 
46 â†’ 48 â†’ 49 â†’ 50 â†’ 52 â†’ 53 â†’ 54 â†’ 56 â†’ 57 â†’ 58 â†’ 60 â†’ 61 â†’ 63 â†’ 
65 â†’ 66 â†’ 68 â†’ 70 â†’ 71 â†’ 73 â†’ 75 â†’ 77 â†’ 78 â†’ 80 â†’ 82 â†’ 84 â†’ 85 â†’ 
87 â†’ 89 â†’ 90 â†’ 91 â†’ 92 â†’ 92 â†’ 93 â†’ 94 â†’ 94 â†’ 95 â†’ 95 â†’ 96 â†’ 97 â†’ 
97 â†’ 98 â†’ 98 â†’ 99 â†’ 99 â†’ 100
```

---

## ğŸ“ æœ€çµ‚è¦æ ¼

### è¦–è¦ºè¨­è¨ˆ
```
èƒŒæ™¯: ç™½è‰² (#FFFFFF)
æ•¸å­—é¡è‰²: é»‘è‰² (#000000)
æ•¸å­—å¤§å°: 180-420px (éŸ¿æ‡‰å¼)
æ•¸å­—ç²—ç´°: 900 (Ultra Bold)
å­—é«”: System UI ç²—é«”ç„¡è¥¯ç·š
ä½ç½®: å·¦ä¸‹è§’ 8px
å·¦åç§»: -12% (è¢«åˆ‡æ‰)
```

### å‹•ç•«æ™‚é•·
```
ç¸½æ™‚é•·: ç´„ 2.2 ç§’
â”œâ”€ æ•¸å­—æ¨é€²: 1.2s (0-100%)
â”œâ”€ æ•¸å­—æ·¡å‡º: 0.5s
â””â”€ èƒŒæ™¯æ·¡å‡º: 0.7s (é‡ç–Š 0.3s)
```

### éŸ¿æ‡‰å¼æ•¸å­—å¤§å°
| è¢å¹•å¯¬åº¦ | æ•¸å­—å¤§å° | è¢«åˆ‡å¯¬åº¦ |
|---------|---------|---------|
| 1920px+ | 420px | ~50px |
| 1440px | 403px | ~48px |
| 1024px | 287px | ~34px |
| 768px | 215px | ~26px |
| 375px | 180px | ~22px |

---

## ğŸ¬ å®Œæ•´å‹•ç•«æµç¨‹

```
é é¢è¼‰å…¥
  â†“
ç™½è‰²å…¨è¢å¹• + å·¦ä¸‹è§’æ•¸å­— "0"
  â†“
å¤šéšæ®µæ•¸å­—è·³å‹•:
  0-30:  æ…¢é€Ÿ (1.5/frame) - çœ‹åˆ°æ›´å¤šæ•¸å­—
  30-60: ä¸­é€Ÿ (0.8/frame) - æ›´å¤šæ•¸å­—åœç•™
  60-90: åŠ é€Ÿ (1.2/frame) - å¿«é€Ÿæ¨é€²
  90-99: æ¸›é€Ÿ (0.5/frame) - æœ€å¾Œå¹¾å€‹æ•¸å­—
  â†“
åœç•™åœ¨ "99" â†’ è·³åˆ° "100"
  â†“
æ•¸å­—ç¸®å°æ·¡å‡º (0.5s)
  â†“
èƒŒæ™¯æ·¡å‡º (0.7s)
  â†“
ä¸»å…§å®¹å¾ä¸­é–“æ·¡å…¥ (scale: 0.98 â†’ 1)
  â†“
å®Œæˆ!
```

---

## ğŸ¨ è¦–è¦ºæ•ˆæœ

### æ•¸å­—æ¨£å¼
```css
{
  font-size: clamp(180px, 28vw, 420px);
  font-weight: 900;
  line-height: 0.85;
  letter-spacing: -0.04em;
  color: #000;
  transform: translateX(-12%);
}
```

### é¡ä¼¼åœ–ç‰‡çš„æ•ˆæœ
```
åœ–ç‰‡ä¸­çš„ "0":
- è¶…ç²—ç„¡è¥¯ç·šå­—é«” âœ…
- å·¦é‚Šè¢«åˆ‡æ‰ä¸€éƒ¨åˆ† âœ…
- å·¨å¤§å°ºå¯¸ âœ…
- é»‘ç™½å°æ¯” âœ…
```

---

## ğŸ”§ é—œéµä¿®æ­£

### Hydration Mismatch è§£æ±º
```tsx
// å•é¡Œ: SSR æ™‚ progress=0, Client æ™‚ progress è®ŠåŒ–
// è§£æ³•: SSR æ™‚å®Œå…¨ä¸æ¸²æŸ“

const [mounted, setMounted] = useState(false);

useEffect(() => {
  setMounted(true); // åªåœ¨ client è¨­ç‚º true
}, []);

if (!mounted) return null; // SSR æ™‚è¿”å› null
```

### å¤šéšæ®µé€²åº¦
```tsx
// ä¸åŒéšæ®µä¸åŒé€Ÿåº¦,è®“æ›´å¤šæ•¸å­—è¢«çœ‹è¦‹
let currentProgress = 0;
const tick = () => {
  if (currentProgress < 30) currentProgress += 1.5;
  else if (currentProgress < 60) currentProgress += 0.8;
  else if (currentProgress < 90) currentProgress += 1.2;
  else currentProgress += 0.5;
  
  setProgress(Math.min(Math.round(currentProgress), 99));
};
```

---

## ğŸ“± æ¸¬è©¦çµæœ

### æ¡Œé¢ (1920px)
```
æ•¸å­—å¤§å°: 420px (è¶…å¤§!)
è¢«åˆ‡å¯¬åº¦: 50px
æ•ˆæœ: éœ‡æ’¼,ç¬¦åˆåœ–ç‰‡é¢¨æ ¼ âœ…
```

### å¹³æ¿ (768px)
```
æ•¸å­—å¤§å°: 215px
è¢«åˆ‡å¯¬åº¦: 26px
æ•ˆæœ: ä»ç„¶å¾ˆå¤§,æ¸…æ™°å¯è¦‹ âœ…
```

### æ‰‹æ©Ÿ (375px)
```
æ•¸å­—å¤§å°: 180px
è¢«åˆ‡å¯¬åº¦: 22px
æ•ˆæœ: ä½”æ“šå¤§éƒ¨åˆ†è¢å¹• âœ…
```

---

## ğŸ¯ å°æ¯”æ”¹é€²

### Before (ç¬¬ä¸€ç‰ˆ)
```
- æ•¸å­—: 120-280px
- å­—é‡: 700
- é€Ÿåº¦: å–®ä¸€é€Ÿåº¦ (2.5/frame)
- å­—é«”: Geist Sans
- å•é¡Œ: Hydration error
```

### After (æœ€çµ‚ç‰ˆ)
```
- æ•¸å­—: 180-420px âœ… (+50%)
- å­—é‡: 900 âœ… (æ›´ç²—)
- é€Ÿåº¦: å¤šéšæ®µè®Šé€Ÿ âœ… (æ›´å¤šæ•¸å­—)
- å­—é«”: System UI Bold âœ… (é¡ä¼¼åœ–ç‰‡)
- ä¿®æ­£: ç„¡ Hydration error âœ…
```

---

## ğŸ’¡ æŠ€è¡“ç´°ç¯€

### é˜²æ­¢ SSR Hydration
```tsx
// 1. åªåœ¨ client mount å¾Œæ¸²æŸ“
if (!mounted) return null;

// 2. ä½¿ç”¨ useEffect æ§åˆ¶ç‹€æ…‹
useEffect(() => {
  setMounted(true);
}, []);
```

### å¤šéšæ®µå‹•ç•«
```tsx
// ä¸åŒéšæ®µä¸åŒå¢é‡
const speeds = {
  phase1: 1.5,  // 0-30
  phase2: 0.8,  // 30-60
  phase3: 1.2,  // 60-90
  phase4: 0.5   // 90-99
};
```

### ç³»çµ±å­—é«”å †ç–Š
```tsx
// ä½¿ç”¨ç³»çµ±æœ€ç²—çš„ç„¡è¥¯ç·šå­—é«”
fontFamily: 'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'
```

---

## âœ… Checklist

- [x] ä¿®æ­£ Hydration error
- [x] æ•¸å­—å¤§å°æå‡ 50% (180-420px)
- [x] å­—é«”ç²—ç´°æ”¹ç‚º 900
- [x] ä½¿ç”¨ç³»çµ±ç²—é«”å­—å‹
- [x] å¤šéšæ®µé€²åº¦é¡¯ç¤ºæ›´å¤šæ•¸å­—
- [x] å·¦é‚Šåˆ‡åˆ° 12% (å¯è¦‹æ›´å¤šæ•¸å­—)
- [x] éŸ¿æ‡‰å¼é©é…æ‰€æœ‰è¢å¹•
- [x] å‹•ç•«æµæš¢ç„¡é–ƒçˆ

---

## ğŸš€ å¦‚ä½•æ¸¬è©¦

1. **æ¸…é™¤å¿«å–é‡æ–°è¼‰å…¥**
   ```
   Cmd+Shift+R (ç¡¬æ€§é‡æ–°æ•´ç†)
   ```

2. **æª¢æŸ¥ Console**
   ```
   æ‡‰è©²æ²’æœ‰ Hydration warning
   æ‡‰è©²æ²’æœ‰ React éŒ¯èª¤
   ```

3. **è§€å¯Ÿæ•¸å­—**
   ```
   æ•¸å­—æ‡‰è©²å¾ˆå¤§ (ä½”è¢å¹• 1/3-1/2)
   æ‡‰è©²çœ‹åˆ°å¾ˆå¤šä¸­é–“æ•¸å­— (ä¸æ˜¯ç›´æ¥è·³ 100)
   å·¦é‚Šæ‡‰è©²è¢«åˆ‡æ‰ä¸€éƒ¨åˆ†
   ```

4. **æ¸¬è©¦éŸ¿æ‡‰å¼**
   ```
   Cmd+Shift+M é–‹å•Ÿ Device Toolbar
   åˆ‡æ›ä¸åŒè£ç½®çœ‹æ•¸å­—å¤§å°
   ```

---

**ç‹€æ…‹**: âœ… å®Œæˆ - å·²ä¿®æ­£æ‰€æœ‰å•é¡Œ
**æœ€çµ‚æ•ˆæœ**: éœ‡æ’¼çš„è¶…å¤§æ•¸å­— Loading,é¡ä¼¼åœ–ç‰‡é¢¨æ ¼
